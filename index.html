<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hostel Warden Dashboard</title>
    <style>
      /* CSS styles */
      body {
        font-family: Arial, sans-serif;
        background-color: #f8f9fa;
        margin: 0;
        padding: 0;
      }

      .container {
        max-width: 800px;
        margin: auto;
        padding: 20px;
      }

      .room-button {
        display: inline-block;
        width: 100px;
        height: 50px;
        background-color: #007bff;
        color: #fff;
        border: none;
        border-radius: 5px;
        margin-right: 10px;
        margin-bottom: 10px;
        cursor: pointer;
        font-size: 16px;
        line-height: 50px;
        text-align: center;
        transition: background-color 0.3s ease;
      }

      .room-button:hover {
        background-color: #0056b3;
      }

      .student-list {
        margin-top: 20px;
      }

      .student-list h3 {
        margin-bottom: 10px;
      }

      .student {
        margin-bottom: 5px;
        cursor: pointer;
        background-color: #fff;
        padding: 8px;
        border-radius: 5px;
        transition: background-color 0.3s ease;
      }

      .student:hover {
        background-color: #f0f0f0;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
      }

      th,
      td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: left;
      }

      th {
        background-color: #007bff;
        color: #fff;
      }

      #submit-btn {
        background-color: #28a745;
        color: #fff;
        border: none;
        border-radius: 5px;
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }

      #submit-btn:hover {
        background-color: #218838;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Hostel Warden Dashboard</h1>

      <h2>Select a Room:</h2>
      <div id="room-buttons">
        <!-- Room buttons will be dynamically generated here -->
      </div>

      <div class="student-list" style="display: none">
        <h3>Students Present:</h3>
        <div id="student-list">
          <!-- Student list will be displayed here -->
        </div>
        <button id="submit-btn" onclick="submitAttendance()">Submit</button>
      </div>

      <table id="attendance-table" style="display: none">
        <thead>
          <tr>
            <th>Room</th>
            <th>Student Name</th>
            <th>Registration Number</th>
          </tr>
        </thead>
        <tbody>
          <!-- Attendance data will be displayed here -->
        </tbody>
      </table>
    </div>

    <script>
      // Sample student data
      const studentsByRoom = {
          "Room 1": ["John Doe - 22MIS0401", "Jane Smith - 22BCE345", "Alice Johnson - 22BMI788"],
          "Room 2": ["Student 4 - Reg No 1", "Student 5 - Reg No 2"],
          // Add more rooms and students as needed
          "Room 3": ["Student 6 - Reg No 3", "Student 7 - Reg No 4"],
          "Room 4": ["Student 8 - Reg No 5", "Student 9 - Reg No 6"],
          "Room 5": ["Student 10 - Reg No 7", "Student 11 - Reg No 8"],
          "Room 6": ["Student 12 - Reg No 9", "Student 13 - Reg No 10"],
          "Room 7": ["Student 14 - Reg No 11", "Student 15 - Reg No 12"],
          "Room 8": ["Student 16 - Reg No 13", "Student 17 - Reg No 14"],
          "Room 9": ["Student 18 - Reg No 15", "Student 19 - Reg No 16"],
          "Room 10": ["Student 20 - Reg No 17", "Student 21 - Reg No 18"],
          "Room 11": ["Student 22 - Reg No 19", "Student 23 - Reg No 20"],
          "Room 12": ["Student 24 - Reg No 21", "Student 25 - Reg No 22"],
          "Room 13": ["Student 26 - Reg No 23", "Student 27 - Reg No 24"],
          "Room 14": ["Student 28 - Reg No 25", "Student 29 - Reg No 26"],
          "Room 15": ["Student 30 - Reg No 27", "Student 31 - Reg No 28"],
          "Room 16": ["Student 32 - Reg No 29", "Student 33 - Reg No 30"],
          "Room 17": ["Student 34 - Reg No 31", "Student 35 - Reg No 32"],
          "Room 18": ["Student 36 - Reg No 33", "Student 37 - Reg No 34"],
          "Room 19": ["Student 38 - Reg No 35", "Student 39 - Reg No 36"],
          "Room 20": ["Student 40 - Reg No 37", "Student 41 - Reg No 38"]
      };

      // Function to display student list for the selected room
      function showStudentList(room) {
          const studentList = document.getElementById("student-list");
          studentList.innerHTML = "";
          const students = studentsByRoom[room];
          if (students) {
              students.forEach(student => {
                  const studentElement = document.createElement("div");
                  studentElement.classList.add("student");
                  studentElement.textContent = student;
                  studentElement.addEventListener("click", () => toggleAttendance(room, student));
                  studentList.appendChild(studentElement);
              });
          }
          document.querySelector(".student-list").style.display = "block";
      }

      // Function to toggle student attendance
      function toggleAttendance(room, student) {
          const attendanceTable = document.getElementById("attendance-table");
          const tbody = attendanceTable.querySelector("tbody");
          const existingRow = tbody.querySelector(tr[data-room="${room}"][data-student="${student}"]);
          if (existingRow) {
              existingRow.remove();
          } else {
              const newRow = document.createElement("tr");
              newRow.setAttribute("data-room", room);
              newRow.setAttribute("data-student", student);
              newRow.innerHTML = `
                  <td>${room}</td>
                  <td>${getStudentName(student)}</td>
                  <td>${getRegNo(student)}</td>
              `;
              tbody.appendChild(newRow);
          }
      }

      // Function to extract student name from student string
      function getStudentName(student) {
          // Assume student name comes before '-'
          return student.split('-')[0].trim();
      }

      // Function to extract registration number from student string
      function getRegNo(student) {
          // Assume registration number follows the pattern "Reg No XXXX"
          const regNoPattern = /Reg No (\w+)/;
          const match = student.match(regNoPattern);
          return match ? match[1] : "Unknown";
      }

      // Function to submit attendance
      function submitAttendance() {
          const attendanceTable = document.getElementById("attendance-table");
          attendanceTable.style.display = "block";
          document.querySelector(".student-list").style.display = "none";
          // Send email to Chief Warden
          sendEmailToChiefWarden();
      }

      // Function to send email to Chief Warden
      function sendEmailToChiefWarden() {
          // Simulate sending email
          const message = "Attendance details submitted successfully!";
          alert(message);
      }

      // Function to generate room buttons
      function generateRoomButtons() {
          const roomButtonsContainer = document.getElementById("room-buttons");
          for (let i = 1; i <= 20; i++) {
              const room = "Room " + i;
              const button = document.createElement("button");
              button.textContent = room;
              button.classList.add("room-button");
              button.addEventListener("click", () => showStudentList(room));
              roomButtonsContainer.appendChild(button);
          }
      }

      // Generate room buttons when the page loads
      window.onload = generateRoomButtons;
    </script>
  </body>
</html>
